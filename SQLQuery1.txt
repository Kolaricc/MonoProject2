Create table Company(
	Id int primary key,
	Name varchar(50),
	Email varchar(25)
);

Create table Adress(
	Id int primary key foreign key references Company(id),
	Street varchar(50),
	Number int,
	City varchar(20)
	);
	
Create table Item(
	Id int primary key,
	Category varchar(20),
	Name varchar(25),
	CompanyId int foreign key references Company(Id)
);

Create table Employee(
	Id int primary key,
	FirstName varchar(15),
	LastName varchar(20)
);

Create table CompanyEmployee
(
	CompanyId int,
	EmployeeId int,

	Primary key(CompanyId,EmployeeId),
	Foreign key(CompanyId) References Company(id),
	Foreign key(EmployeeId) References Employee(id)

);

Insert into Company values (1,'Company1','company1@mail.com')
Insert into Company values (2,'Company2','second@mail.com')
Insert into Company values (3,'Company3','comp3@mail.com')
Insert into Company values (4,'Company4','forth@mail.com')
Insert into Company values (5,'Company5','company5@mail.com')
Insert into Company values (6,'Company6','six@mail.com')

Select * from Company

Insert into Adress values (1,'Street st.',11,'Osijek')
Insert into Adress values (2,'Lane st.',55,'Vukovar')
Insert into Adress values (3,'Street ln.',4,'Zagreb')
Insert into Adress values (4,'Lane ln.',10,'Osijek')

Select * from Adress

Insert into Item values (1,'Office supplys','Paper',2)
Insert into Item values (2,'Office supplys','PaperClip',2)
Insert into Item values (3,'Office supplys','Eraser',1)
Insert into Item values (4,'Office supplys','Marker',4)

Select * from Item

Insert into Employee values (1,'John','Doe')
Insert into Employee values (2,'Jane','Doe')
Insert into Employee values (3,'Jack','Jackson')
Insert into Employee values (4,'Johhny','Daniels')
Insert into Employee values (5,'Michael','Stevens')

Select * from Employee

Insert into CompanyEmployee values(1,1)
Insert into CompanyEmployee values(1,4)
Insert into CompanyEmployee values(5,1)
Insert into CompanyEmployee values(4,3)
Insert into CompanyEmployee values(5,3)
Insert into CompanyEmployee values(4,2)

Select Company.Name, Adress.Street, Adress.Number, Adress.City
From Adress
Right join Company On Adress.Id = Company.Id
Order by Adress.City

Select Company.Name, Employee.FirstName, Employee.LastName
From Employee
Inner join CompanyEmployee on Employee.Id=CompanyEmployee.EmployeeId
Inner join Company on Company.id = CompanyEmployee.CompanyId
Order by Company.Id

Select  Company.Name, Count(Item.Id) as 'NumberOfItems' 
From Company
Full Outer join Item on Company.Id = Item.CompanyId
Group by Company.Name
Having COUNT(Item.Id)>=1

Select Top 3 * From Company 

Select * From Company
Order by Name Desc 
Offset 2 rows fetch next 3 rows only

Delete Employee from Employee 
Left join CompanyEmployee on CompanyEmployee.EmployeeId = Employee.id
where CompanyEmployee.EmployeeId is null

Update Item
set CompanyId = 3 where id=3
